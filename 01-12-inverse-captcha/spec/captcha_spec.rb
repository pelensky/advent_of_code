require 'captcha'

RSpec.describe Captcha do

  subject(:captcha) { described_class.new }

  context "find numbers" do
    it "finds the numbers that are the same as the one next to them" do
      expect(captcha.find_matching_numbers(1122)).to eq [1, 2]
    end

    it "finds other numbers that are the same as the one next to them" do
      expect(captcha.find_matching_numbers(1111)).to eq [1, 1, 1, 1]
    end

    it "responds with nil if none are valid" do
      expect(captcha.find_matching_numbers(1234)).to eq []
    end

    it "includes the last number" do
      expect(captcha.find_matching_numbers(91212129)).to eq [9]
    end
  end

  context "sum of next numbers" do

    it "sums the numbers" do
      expect(captcha.get_sum_of_matching_numbers_next_to_each_other(1122)).to eq 3
    end

    it "sums the next example" do
      expect(captcha.get_sum_of_matching_numbers_next_to_each_other(1111)).to eq 4
    end

    it "sums the non matching example" do
      expect(captcha.get_sum_of_matching_numbers_next_to_each_other(1234)).to eq 0
    end

    it "sums the example with the first and last matching" do
      expect(captcha.get_sum_of_matching_numbers_next_to_each_other(91212129)).to eq 9
    end

    it "sums a very long number" do
      expect(captcha.get_sum_of_matching_numbers_next_to_each_other(7385764686251444473997915123782972536343732657517834671759462795461213782428342931896181695578996274321317419242359534783957372932953774336338118488967172727651862498838195317654289797558683458511126996217953322817229372373455862177844478443391835484591525235651863464891177927244954925827786799436536592561374269299474738321293575385899438446558569241236278779779983587912431395475244796538888373287186921647426866237756737342731976763959499149996315591584716122199183295277439872911371313924594486766479438544417416529743495114819825984524437367225234184772617942525954961136976875325182725754768372684531972614455134523596338355374444273522115362238734383164778129376628621497662965456761631796178353599629887665939521892447361219479646483978798392716119793282717739524897385958273726776318154977675546287789874265339688753977185129334929715486381875286278528247696464162297691698154712775589541945263574897266575996455547625537947927972497979333932115165151462742216327321116291372396585618664475715321298122335789262942284571328414569375464386446824882551918843185195829547373915482687534432942778312542752798313434628498295216692646713137244198123219531693559848915834623825919191532658735422176965451741869666714874158492556445954852299161868651448123825821775363219246244515946392686275545561989355573946924767442253465342753995764791927951158771231944177692469531494559697911176613943396258141822244578457498361352381518166587583342233816989329544415621127397996723997397219676486966684729653763525768655324443991129862129181215339947555257279592921258246646215764736698583211625887436176149251356452358211458343439374688341116529726972434697324734525114192229641464227986582845477741747787673588848439713619326889624326944553386782821633538775371915973899959295232927996742218926514374168947582441892731462993481877277714436887597223871881149693228928442427611664655772333471893735932419937832937953495929514837663883938416644387342825836673733778119481514427512453357628396666791547531814844176342696362416842993761919369994779897357348334197721735231299249116477)).to eq 1171
    end
  end

  context "numbers that match their furthest digit away" do
    it "finds a number and its furthest away numbers" do
      expect(captcha.find_far_numbers(1212)).to eq [1, 2, 1, 2]
    end

    it "finds a different number and its furthest away numbers" do
      expect(captcha.find_far_numbers(1221)).to eq []
    end

    it "finds yet a different number and its furthest away numbers" do
      expect(captcha.find_far_numbers(123425)).to eq [2, 2]
    end

    it "finds an additional number and its furthest away numbers" do
      expect(captcha.find_far_numbers(123123)).to eq [1, 2, 3, 1, 2, 3]
    end

    it "finds a different number and its furthest away numbers" do
      expect(captcha.find_far_numbers(12131415)).to eq [1, 1, 1, 1]
    end
  end

  context "sums these numbers" do

    it "sums these numbers" do
      expect(captcha.get_sum_of_far_numbers(1212)).to eq 6
    end

    it "sums these numbers" do
      expect(captcha.get_sum_of_far_numbers(1221)).to eq 0
    end

    it "sums these numbers" do
      expect(captcha.get_sum_of_far_numbers(123425)).to eq 4
    end

    it "sums these numbers" do
      expect(captcha.get_sum_of_far_numbers(123123)).to eq 12
    end

    it "sums these numbers" do
      expect(captcha.get_sum_of_far_numbers(12131415)).to eq 4
    end

    it "sums a big number" do
      expect(captcha.get_sum_of_far_numbers(7385764686251444473997915123782972536343732657517834671759462795461213782428342931896181695578996274321317419242359534783957372932953774336338118488967172727651862498838195317654289797558683458511126996217953322817229372373455862177844478443391835484591525235651863464891177927244954925827786799436536592561374269299474738321293575385899438446558569241236278779779983587912431395475244796538888373287186921647426866237756737342731976763959499149996315591584716122199183295277439872911371313924594486766479438544417416529743495114819825984524437367225234184772617942525954961136976875325182725754768372684531972614455134523596338355374444273522115362238734383164778129376628621497662965456761631796178353599629887665939521892447361219479646483978798392716119793282717739524897385958273726776318154977675546287789874265339688753977185129334929715486381875286278528247696464162297691698154712775589541945263574897266575996455547625537947927972497979333932115165151462742216327321116291372396585618664475715321298122335789262942284571328414569375464386446824882551918843185195829547373915482687534432942778312542752798313434628498295216692646713137244198123219531693559848915834623825919191532658735422176965451741869666714874158492556445954852299161868651448123825821775363219246244515946392686275545561989355573946924767442253465342753995764791927951158771231944177692469531494559697911176613943396258141822244578457498361352381518166587583342233816989329544415621127397996723997397219676486966684729653763525768655324443991129862129181215339947555257279592921258246646215764736698583211625887436176149251356452358211458343439374688341116529726972434697324734525114192229641464227986582845477741747787673588848439713619326889624326944553386782821633538775371915973899959295232927996742218926514374168947582441892731462993481877277714436887597223871881149693228928442427611664655772333471893735932419937832937953495929514837663883938416644387342825836673733778119481514427512453357628396666791547531814844176342696362416842993761919369994779897357348334197721735231299249116477)).to eq 1024
    end

  end
end
